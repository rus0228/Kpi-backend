(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[397],{7110:function(P,G,t){"use strict";var I=t(67294),l=t(81257),W=t(27199),H=t(30731),X=t(4874),v=function(o,d){var h={};for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&d.indexOf(s)<0&&(h[s]=o[s]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,s=Object.getOwnPropertySymbols(o);T<s.length;T++)d.indexOf(s[T])<0&&Object.prototype.propertyIsEnumerable.call(o,s[T])&&(h[s[T]]=o[s[T]]);return h},p=(0,I.forwardRef)(function(o,d){var h=o.style,s=h===void 0?{height:"inherit"}:h,T=o.className,Z=o.loading,$=o.loadingTemplate,z=o.errorTemplate,f=v(o,["style","className","loading","loadingTemplate","errorTemplate"]),u=(0,W.Z)(l.by,f),b=u.chart,V=u.container;return(0,I.useImperativeHandle)(d,function(){return{getChart:function(){return b.current}}}),I.createElement(H.Z,{errorTemplate:z},Z&&I.createElement(X.Z,{loadingTemplate:$}),I.createElement("div",{className:T,style:s,ref:V}))});G.Z=p},23230:function(P){P.exports={chartCard:"chartCard___3TM4T",chartTop:"chartTop___3iur-",chartTopMargin:"chartTopMargin___24rCR",chartTopHasMargin:"chartTopHasMargin___3AQNY",metaWrap:"metaWrap___3Nuv1",avatar:"avatar___FoC4K",meta:"meta___1_3lt",action:"action___3uuUN",total:"total___D6PP7",content:"content___yyFJS",contentFixed:"contentFixed___3tZUw",footer:"footer___2Huhb",footerMargin:"footerMargin___38Y2F"}},16829:function(P){P.exports={field:"field___2ZfpN",label:"label___1hOvq",number:"number___2qklC"}},74450:function(P){P.exports={trendItem:"trendItem___2dudO",up:"up___1wFiw",down:"down___2tA2-",trendItemGrey:"trendItemGrey___1ksIM",reverseColor:"reverseColor___1BPCV"}},64996:function(P){P.exports={iconGroup:"iconGroup___1ul1X",anticon:"anticon___2oL3s",rankingList:"rankingList___27zJ7",rankingItemNumber:"rankingItemNumber___3cCVs",active:"active___38Z1J",rankingItemTitle:"rankingItemTitle___1WzBW",salesExtra:"salesExtra___1Ak4B",currentDate:"currentDate___1OZ7R",salesCard:"salesCard___18Vng",salesBar:"salesBar___4PIeq",salesRank:"salesRank___2G25G",salesCardExtra:"salesCardExtra____5XWN",salesTypeRadio:"salesTypeRadio___3XD0y",offlineCard:"offlineCard___2f-fc",trendText:"trendText___-kx87",rankingTitle:"rankingTitle___1K4Q9",salesExtraWrap:"salesExtraWrap___2Vki8"}},93356:function(P,G,t){"use strict";t.d(G,{eW:function(){return nt},X6:function(){return j},mO:function(){return Q},mj:function(){return M},Kz:function(){return r},qp:function(){return g}});var I=t(92077),l=t.n(I),W=t(11849),H=t(32059),X=t(93224),v=t(28991),p=t(67294),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},d=o,h=t(27029),s=function(n,e){return p.createElement(h.Z,(0,v.Z)((0,v.Z)({},n),{},{ref:e,icon:d}))};s.displayName="CaretUpOutlined";var T=p.forwardRef(s),Z={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},$=Z,z=function(n,e){return p.createElement(h.Z,(0,v.Z)((0,v.Z)({},n),{},{ref:e,icon:$}))};z.displayName="CaretDownOutlined";var f=p.forwardRef(z),u=t(94184),b=t.n(u),V=t(74450),J=t.n(V),i=t(85893),q=function(n){var e,a=n.colorful,x=a===void 0?!0:a,Y=n.reverseColor,S=Y===void 0?!1:Y,F=n.flag,R=n.children,U=n.className,k=(0,X.Z)(n,["colorful","reverseColor","flag","children","className"]),ot=b()(J().trendItem,(e={},(0,H.Z)(e,J().trendItemGrey,!x),(0,H.Z)(e,J().reverseColor,S&&x),e),U),E={color:"green",fontSize:17},C={color:"red",fontSize:17};return(0,i.jsxs)("div",(0,W.Z)((0,W.Z)({},k),{},{className:ot,title:typeof R=="string"?R:"",children:[(0,i.jsx)("span",{children:R}),F&&(0,i.jsx)("span",{style:F==="up"?E:C,children:F==="up"?(0,i.jsx)(T,{}):(0,i.jsx)(f,{})})]}))},w=q,at=t(30381),A=t.n(at),nt=function(n){var e=n.current,a=n.prev,x=e>a||a===null?"up":"down",Y=e>a?"+".concat(l()((e-a)/a*100).format("0,0.00"),"%"):"".concat(l()((e-a)/a*100).format("0,0.00"),"%");return(0,i.jsx)(w,{flag:x,style:{marginRight:16},children:(0,i.jsx)("span",{style:{paddingRight:10},children:a!==null&&e!==null?Y:"Empty previous or current value"})})},Q=function(n){var e=n.current,a=n.prev,x=n._startTime,Y=n._endTime,S=e>a?"+".concat(l()(e-a).format("0,0.00"),"\u20AC"):"".concat(l()(e-a).format("0,0.00"),"\u20AC"),F=e>a?"+".concat(l()((e-a)/a*100).format("0,0.00"),"%"):"".concat(l()((e-a)/a*100).format("0,0.00"),"%");return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:a!==null&&e!==null?F:"Empty previous or current value"}),(0,i.jsx)("div",{children:S}),(0,i.jsx)("div",{children:"".concat(A()(x).format("YYYY/MM/DD")," - ").concat(A()(Y).format("YYYY/MM/DD"))})]})},M=function(n){var e=n.current,a=n.prev,x=n._startTime,Y=n._endTime,S=e>a?"+".concat(l()(e-a).format("0,0")):"".concat(l()(e-a).format("0,0")),F=e>a?"+".concat(l()((e-a)/a*100).format("0,0.00"),"%"):"".concat(l()((e-a)/a*100).format("0,0.00"),"%");return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:F}),(0,i.jsx)("div",{children:S}),(0,i.jsx)("div",{children:"".concat(A()(x).format("YYYY/MM/DD")," - ").concat(A()(Y).format("YYYY/MM/DD"))})]})},g=function(n){var e=n.seconds;e=Number(e);var a=Math.floor(e/(3600*24)),x=Math.floor(e%(3600*24)/3600),Y=Math.floor(e%3600/60),S=Math.floor(e%60),F=a>0?a+"d":"",R=x>0?x+"h":"",U=Y>0?Y+"m":"",k=S>0?S+"s":"";return"".concat(F," ").concat(R," ").concat(U," ").concat(k)},r=function(n){var e=n.current,a=n.prev,x=n._startTime,Y=n._endTime,S=e>a?e-a:a-e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(g,{seconds:S})}),(0,i.jsx)("div",{children:"".concat(A()(x).format("YYYY/MM/DD")," - ").concat(A()(Y).format("YYYY/MM/DD"))})]})},j=function(n){var e=n.current,a=n.prev,x=e>a?"up":"down",Y=e>a?e-a:a-e;return(0,i.jsx)(w,{flag:x,style:{marginRight:16},children:(0,i.jsx)("span",{children:(0,i.jsx)(g,{seconds:Y})})})}},4937:function(P,G,t){"use strict";t.d(G,{H:function(){return W},l:function(){return H}});var I=t(30381),l=t.n(I),W=function(v){var p=v.store,o=l()(v.range[0]).format("YYYY-MM-DD HH:mm:ss"),d=l()(v.range[1]).format("YYYY-MM-DD HH:mm:ss");if(v.compare==="lastDuration"){var h=l()(d).diff(o,"days"),s=l()(o,"YYYY-MM-DD HH:mm:ss").subtract(h+1,"days").format("YYYY-MM-DD HH:mm:ss"),T=l()(s,"YYYY-MM-DD HH:mm:ss").add(h,"days").format("YYYY-MM-DD 23:59:59");return{store:p,startTime:o,endTime:d,_startTime:s,_endTime:T}}if(v.compare==="lastYear"){var Z=l()(o,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),$=l()(d,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),z=Z.format("YYYY-MM-DD HH:mm:ss"),f=$.format("YYYY-MM-DD HH:mm:ss");return{store:p,startTime:o,endTime:d,_startTime:z,_endTime:f}}},H=function(v,p,o){var d=o===0?"":"\u20AC";if(p>0){var h=o===0?v-p:(v-p).toFixed(2),s=h/p*100;return{diff:h>0?"+".concat(h).concat(d):"".concat(h).concat(d),percentage:s>0?"+".concat(s.toFixed(2),"%"):"".concat(s.toFixed(2),"%")}}else{var T=o===0?v:v.toFixed(2),Z="\u221E";return{diff:T>0?"+".concat(T).concat(d):"".concat(T).concat(d),percentage:"no previous records"}}}},84186:function(P,G,t){"use strict";t.d(G,{th:function(){return J},c2:function(){return A}});var I=t(92077),l=t.n(I),W=t(11849),H=t(58024),X=t(39144),v=t(93224),p=t(32059),o=t(69610),d=t(54941),h=t(81306),s=t(19809),T=t(67294),Z=t(94184),$=t.n(Z),z=t(23230),f=t.n(z),u=t(85893),b=function(M){if(!M&&M!==0)return null;var g;switch(typeof M){case"undefined":g=null;break;case"function":g=(0,u.jsx)("div",{className:f().total,children:M()});break;default:g=(0,u.jsx)("div",{className:f().total,children:M})}return g},V=function(Q){(0,h.Z)(g,Q);var M=(0,s.Z)(g);function g(){var r;(0,o.Z)(this,g);for(var j=arguments.length,O=new Array(j),n=0;n<j;n++)O[n]=arguments[n];return r=M.call.apply(M,[this].concat(O)),r.renderContent=function(){var e=r.props,a=e.contentHeight,x=e.title,Y=e.avatar,S=e.action,F=e.total,R=e.footer,U=e.children,k=e.loading;return k?!1:(0,u.jsxs)("div",{className:f().chartCard,children:[(0,u.jsxs)("div",{className:$()(f().chartTop,(0,p.Z)({},f().chartTopMargin,!U&&!R)),children:[(0,u.jsx)("div",{className:f().avatar,children:Y}),(0,u.jsxs)("div",{className:f().metaWrap,children:[(0,u.jsxs)("div",{className:f().meta,children:[(0,u.jsx)("span",{className:f().title,children:x}),(0,u.jsx)("span",{className:f().action,children:S})]}),b(F)]})]}),U&&(0,u.jsx)("div",{className:f().content,style:{height:a||"auto"},children:(0,u.jsx)("div",{className:a&&f().contentFixed,children:U})}),R&&(0,u.jsx)("div",{className:$()(f().footer,(0,p.Z)({},f().footerMargin,!U)),children:R})]})},r}return(0,d.Z)(g,[{key:"render",value:function(){var j=this.props,O=j.loading,n=O===void 0?!1:O,e=j.contentHeight,a=j.title,x=j.avatar,Y=j.action,S=j.total,F=j.footer,R=j.children,U=(0,v.Z)(j,["loading","contentHeight","title","avatar","action","total","footer","children"]);return(0,u.jsx)(X.Z,(0,W.Z)((0,W.Z)({loading:n,bodyStyle:{padding:"20px 24px 8px 24px"}},U),{},{children:this.renderContent()}))}}]),g}(T.Component),J=V,i=t(16829),q=t.n(i),w=function(M){var g=M.label,r=M.value,j=(0,v.Z)(M,["label","value"]);return(0,u.jsxs)("div",(0,W.Z)((0,W.Z)({className:q().field},j),{},{children:[(0,u.jsx)("span",{className:q().label,children:g}),(0,u.jsx)("span",{className:q().number,children:r})]}))},at=w,A=function(M){return"".concat(l()(M).format("0,0.00")," \u20AC")},nt={yuan:A,ChartCard:J,Field:at}},95045:function(P,G,t){"use strict";t.r(G),t.d(G,{default:function(){return ot}});var I=t(13062),l=t(71230),W=t(89032),H=t(15746),X=t(22385),v=t(69713),p=t(2824),o=t(67294),d=t(21010),h=t(21349),s=t(3182),T=t(94043),Z=t.n(T);function $(){return z.apply(this,arguments)}function z(){return z=(0,s.Z)(Z().mark(function E(){return Z().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,d.WY)("/api/fake_analysis_chart_data"));case 1:case"end":return D.stop()}},E)})),z.apply(this,arguments)}function f(E,C,D,m,N){return u.apply(this,arguments)}function u(){return u=(0,s.Z)(Z().mark(function E(C,D,m,N,K){return Z().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,d.WY)("/api/getNumberOfNewClients?startTime=".concat(C,"&endTime=").concat(D,"&_startTime=").concat(m,"&_endTime=").concat(N,"&store=").concat(K)));case 1:case"end":return c.stop()}},E)})),u.apply(this,arguments)}function b(E,C,D,m,N){return V.apply(this,arguments)}function V(){return V=(0,s.Z)(Z().mark(function E(C,D,m,N,K){return Z().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,d.WY)("/api/getMostSpentClientsData?startTime=".concat(C,"&endTime=").concat(D,"&_startTime=").concat(m,"&_endTime=").concat(N,"&store=").concat(K)));case 1:case"end":return c.stop()}},E)})),V.apply(this,arguments)}function J(E,C,D,m,N){return i.apply(this,arguments)}function i(){return i=(0,s.Z)(Z().mark(function E(C,D,m,N,K){return Z().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,d.WY)("/api/getRepeatedCustomerRate?startTime=".concat(C,"&endTime=").concat(D,"&_startTime=").concat(m,"&_endTime=").concat(N,"&store=").concat(K)));case 1:case"end":return c.stop()}},E)})),i.apply(this,arguments)}var q=t(58024),w=t(39144),at=t(92077),A=t.n(at),nt=t(7110),Q=t(64996),M=t.n(Q),g=t(4937),r=t(85893),j=function(C){var D=C.loading,m=C.mostSpentClientsData,N=C.time,K=o.useMemo(function(){var c=[];return m.length>0&&m.map(function(y){var B=(0,g.l)(parseFloat(y.spent),parseFloat(y._spent),1);c.push({x:y.name,y:parseFloat(y.spent),a:B.diff,b:B.percentage})}),{data:c}},[m]),L=K.data;return(0,r.jsx)(w.Z,{loading:D,className:M().salesCard,bordered:!1,title:"Most Money Spent Clients",style:{height:"100%"},children:(0,r.jsx)(l.Z,{gutter:16,children:(0,r.jsx)(H.Z,{span:24,children:(0,r.jsx)(nt.Z,{radius:.8,angleField:"y",colorField:"x",data:L,label:{type:"outer",style:{fontSize:15},formatter:function(y,B){return"".concat(A()(B._origin.y).format("0,0.00"),"\u20AC")}},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(y,B){return B.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(B[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(B[0].data.y,"\u20AC")+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(N)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(B[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(B[0].data.b)+"</div>":""}}})})})})},O=j,n=function(C){var D=C.loading,m=C.data,N=C.time,K=o.useMemo(function(){if(Object.keys(m).length>0){var L=(0,g.l)(parseFloat(m.current.notRepeated),parseFloat(m.prev.notRepeated),0),c=(0,g.l)(parseFloat(m.current.repeated),parseFloat(m.prev.repeated),0);return[{x:"Not Repeated",y:m.current.notRepeated,a:L.diff,b:L.percentage},{x:"Repeated",y:m.current.repeated,a:c.diff,b:c.percentage}]}else return[]},[m]);return(0,r.jsx)(w.Z,{loading:D,className:M().salesCard,bordered:!1,title:"Repeated Customer Rate",style:{height:"100%"},children:(0,r.jsx)(l.Z,{gutter:16,children:(0,r.jsx)(H.Z,{span:24,children:(0,r.jsx)(nt.Z,{radius:.8,angleField:"y",colorField:"x",data:K,label:{type:"outer",style:{fontSize:15},formatter:function(c,y){return"".concat(A()(y._origin.y).format("0,0"))}},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(c,y){return y.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(y[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(y[0].data.y)+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(N)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(y[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(y[0].data.b)+"</div>":""}}})})})})},e=n,a=t(84186),x=t(93356),Y=t(68628),S=t(85518),F=t(30381),R=t.n(F),U=S.tq?{marginTop:164}:{},k=function(){var C=(0,d.tT)("@@initialState"),D=C.initialState,m=(0,d.QT)($),N=m.loading,K=m.data,L=(0,o.useState)([]),c=(0,p.Z)(L,2),y=c[0],B=c[1],ut=(0,o.useState)([]),ct=(0,p.Z)(ut,2),mt=ct[0],vt=ct[1],ft=(0,o.useState)({}),dt=(0,p.Z)(ft,2),pt=dt[0],ht=dt[1],rt=(0,g.H)(D),st=rt.startTime,lt=rt.endTime,_=rt._startTime,tt=rt._endTime,it=rt.store;return o.useEffect(function(){f(st,lt,_,tt,it).then(function(et){B(et)}),b(st,lt,_,tt,it).then(function(et){vt(et)}),J(st,lt,_,tt,it).then(function(et){ht(et)})},[D]),(0,r.jsx)(h.Z,{style:U,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{gutter:24,style:{marginBottom:24},children:(0,r.jsx)(H.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,r.jsx)(o.Suspense,{fallback:null,children:Object.keys(y).length>0?(0,r.jsx)(a.th,{bordered:!1,title:"Number of New Clients",action:(0,r.jsx)(v.Z,{title:(0,r.jsx)(x.mj,{current:y.current.count,prev:y.prev.count,_startTime:_,_endTime:tt}),children:(0,r.jsx)(Y.Z,{})}),loading:N,total:function(){return(0,r.jsx)("div",{children:y.current.count})},footer:(0,r.jsx)(x.eW,{current:y.current.count,prev:y.prev.count}),contentHeight:46}):(0,r.jsx)("div",{})})})}),(0,r.jsx)(l.Z,{gutter:24,style:{marginBottom:24},children:(0,r.jsx)(H.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(e,{loading:N,data:pt,time:"".concat(R()(_).format("YYYY/MM/DD")," ~ ").concat(R()(tt).format("YYYY/MM/DD"))})})})}),(0,r.jsx)(l.Z,{gutter:24,children:(0,r.jsx)(H.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,r.jsx)(o.Suspense,{fallback:null,children:(0,r.jsx)(O,{loading:N,mostSpentClientsData:mt,time:"".concat(R()(_).format("YYYY/MM/DD")," ~ ").concat(R()(tt).format("YYYY/MM/DD"))})})})})]})})},ot=k}}]);
