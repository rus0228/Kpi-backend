(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[397],{7110:function(F,A,t){"use strict";var H=t(67294),i=t(81257),P=t(27199),S=t(30731),V=t(4874),f=function(s,u){var g={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&u.indexOf(o)<0&&(g[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,o=Object.getOwnPropertySymbols(s);y<o.length;y++)u.indexOf(o[y])<0&&Object.prototype.propertyIsEnumerable.call(s,o[y])&&(g[o[y]]=s[o[y]]);return g},h=(0,H.forwardRef)(function(s,u){var g=s.style,o=g===void 0?{height:"inherit"}:g,y=s.className,Y=s.loading,U=s.loadingTemplate,I=s.errorTemplate,p=f(s,["style","className","loading","loadingTemplate","errorTemplate"]),m=(0,P.Z)(i.by,p),Q=m.chart,K=m.container;return(0,H.useImperativeHandle)(u,function(){return{getChart:function(){return Q.current}}}),H.createElement(S.Z,{errorTemplate:I},Y&&H.createElement(V.Z,{loadingTemplate:U}),H.createElement("div",{className:y,style:o,ref:K}))});A.Z=h},23230:function(F){F.exports={chartCard:"chartCard___3TM4T",chartTop:"chartTop___3iur-",chartTopMargin:"chartTopMargin___24rCR",chartTopHasMargin:"chartTopHasMargin___3AQNY",metaWrap:"metaWrap___3Nuv1",avatar:"avatar___FoC4K",meta:"meta___1_3lt",action:"action___3uuUN",total:"total___D6PP7",content:"content___yyFJS",contentFixed:"contentFixed___3tZUw",footer:"footer___2Huhb",footerMargin:"footerMargin___38Y2F"}},16829:function(F){F.exports={field:"field___2ZfpN",label:"label___1hOvq",number:"number___2qklC"}},74450:function(F){F.exports={trendItem:"trendItem___2dudO",up:"up___1wFiw",down:"down___2tA2-",trendItemGrey:"trendItemGrey___1ksIM",reverseColor:"reverseColor___1BPCV"}},64996:function(F){F.exports={iconGroup:"iconGroup___1ul1X",anticon:"anticon___2oL3s",rankingList:"rankingList___27zJ7",rankingItemNumber:"rankingItemNumber___3cCVs",active:"active___38Z1J",rankingItemTitle:"rankingItemTitle___1WzBW",salesExtra:"salesExtra___1Ak4B",currentDate:"currentDate___1OZ7R",salesCard:"salesCard___18Vng",salesBar:"salesBar___4PIeq",salesRank:"salesRank___2G25G",salesCardExtra:"salesCardExtra____5XWN",salesTypeRadio:"salesTypeRadio___3XD0y",offlineCard:"offlineCard___2f-fc",trendText:"trendText___-kx87",rankingTitle:"rankingTitle___1K4Q9",salesExtraWrap:"salesExtraWrap___2Vki8"}},93356:function(F,A,t){"use strict";t.d(A,{eW:function(){return et},X6:function(){return D},mO:function(){return w},mj:function(){return at},Kz:function(){return j},qp:function(){return B}});var H=t(92077),i=t.n(H),P=t(11849),S=t(32059),V=t(93224),f=t(28991),h=t(67294),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},u=s,g=t(27029),o=function(a,e){return h.createElement(g.Z,(0,f.Z)((0,f.Z)({},a),{},{ref:e,icon:u}))};o.displayName="CaretUpOutlined";var y=h.forwardRef(o),Y={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},U=Y,I=function(a,e){return h.createElement(g.Z,(0,f.Z)((0,f.Z)({},a),{},{ref:e,icon:U}))};I.displayName="CaretDownOutlined";var p=h.forwardRef(I),m=t(94184),Q=t.n(m),K=t(74450),X=t.n(K),l=t(85893),k=function(a){var e,n=a.colorful,c=n===void 0?!0:n,x=a.reverseColor,Z=x===void 0?!1:x,N=a.flag,L=a.children,J=a.className,R=(0,V.Z)(a,["colorful","reverseColor","flag","children","className"]),G=Q()(X().trendItem,(e={},(0,S.Z)(e,X().trendItemGrey,!c),(0,S.Z)(e,X().reverseColor,Z&&c),e),J),nt={color:"green",fontSize:17},st={color:"red",fontSize:17};return(0,l.jsxs)("div",(0,P.Z)((0,P.Z)({},R),{},{className:G,title:typeof L=="string"?L:"",children:[(0,l.jsx)("span",{children:L}),N&&(0,l.jsx)("span",{style:N==="up"?nt:st,children:N==="up"?(0,l.jsx)(y,{}):(0,l.jsx)(p,{})})]}))},b=k,et=function(a){var e=a.current,n=a.prev,c=e>n?"up":"down",x=e>n?"+".concat(i()((e-n)/n*100).format("0,0.00"),"%"):"".concat(i()((e-n)/n*100).format("0,0.00"),"%");return(0,l.jsx)(b,{flag:c,style:{marginRight:16},children:(0,l.jsx)("span",{children:x})})},w=function(a){var e=a.current,n=a.prev,c=a._startTime,x=a._endTime,Z=e>n?"+".concat(i()(e-n).format("0,0.00"),"\u20AC"):"".concat(i()(e-n).format("0,0.00"),"\u20AC"),N=e>n?"+".concat(i()((e-n)/n*100).format("0,0.00"),"%"):"".concat(i()((e-n)/n*100).format("0,0.00"),"%");return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:N}),(0,l.jsx)("div",{children:Z}),(0,l.jsx)("div",{children:"".concat(c," - ").concat(x)})]})},at=function(a){var e=a.current,n=a.prev,c=a._startTime,x=a._endTime,Z=e>n?"+".concat(i()(e-n).format("0,0")):"".concat(i()(e-n).format("0,0")),N=e>n?"+".concat(i()((e-n)/n*100).format("0,0.00"),"%"):"".concat(i()((e-n)/n*100).format("0,0.00"),"%");return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:N}),(0,l.jsx)("div",{children:Z}),(0,l.jsx)("div",{children:"".concat(c," - ").concat(x)})]})},B=function(a){var e=a.seconds;e=Number(e);var n=Math.floor(e/(3600*24)),c=Math.floor(e%(3600*24)/3600),x=Math.floor(e%3600/60),Z=Math.floor(e%60),N=n>0?n+"d":"",L=c>0?c+"h":"",J=x>0?x+"m":"",R=Z>0?Z+"s":"";return"".concat(N," ").concat(L," ").concat(J," ").concat(R)},j=function(a){var e=a.current,n=a.prev,c=a._startTime,x=a._endTime,Z=e>n?e-n:n-e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)(B,{seconds:Z})}),(0,l.jsx)("div",{children:"".concat(c," - ").concat(x)})]})},D=function(a){var e=a.current,n=a.prev,c=e>n?"up":"down",x=e>n?e-n:n-e;return(0,l.jsx)(b,{flag:c,style:{marginRight:16},children:(0,l.jsx)("span",{children:(0,l.jsx)(B,{seconds:x})})})}},4937:function(F,A,t){"use strict";t.d(A,{H:function(){return P},l:function(){return S}});var H=t(30381),i=t.n(H),P=function(f){var h=f.store,s=i()(f.range[0]).format("YYYY-MM-DD HH:mm:ss"),u=i()(f.range[1]).format("YYYY-MM-DD HH:mm:ss");if(f.compare==="lastDuration"){var g=i()(u).diff(s,"days"),o=i()(s,"YYYY-MM-DD HH:mm:ss").subtract(g+1,"days").format("YYYY-MM-DD HH:mm:ss"),y=i()(o,"YYYY-MM-DD HH:mm:ss").add(g,"days").format("YYYY-MM-DD 23:59:59");return{store:h,startTime:s,endTime:u,_startTime:o,_endTime:y}}if(f.compare==="lastYear"){var Y=i()(s,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),U=i()(u,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),I=Y.format("YYYY-MM-DD HH:mm:ss"),p=U.format("YYYY-MM-DD HH:mm:ss");return{store:h,startTime:s,endTime:u,_startTime:I,_endTime:p}}},S=function(f,h,s){var u=s===0?"":"\u20AC";if(h>0){var g=s===0?f-h:(f-h).toFixed(2),o=g/h*100;return{diff:g>0?"+".concat(g).concat(u):"".concat(g).concat(u),percentage:o>0?"+".concat(o.toFixed(2),"%"):"".concat(o.toFixed(2),"%")}}else{var y=s===0?f:f.toFixed(2),Y="\u221E";return{diff:y>0?"+".concat(y).concat(u):"".concat(y).concat(u),percentage:"no previous records"}}}},84186:function(F,A,t){"use strict";t.d(A,{th:function(){return X},c2:function(){return w}});var H=t(92077),i=t.n(H),P=t(11849),S=t(58024),V=t(39144),f=t(93224),h=t(32059),s=t(69610),u=t(54941),g=t(81306),o=t(19809),y=t(67294),Y=t(94184),U=t.n(Y),I=t(23230),p=t.n(I),m=t(85893),Q=function(j){if(!j&&j!==0)return null;var D;switch(typeof j){case"undefined":D=null;break;case"function":D=(0,m.jsx)("div",{className:p().total,children:j()});break;default:D=(0,m.jsx)("div",{className:p().total,children:j})}return D},K=function(B){(0,g.Z)(D,B);var j=(0,o.Z)(D);function D(){var r;(0,s.Z)(this,D);for(var a=arguments.length,e=new Array(a),n=0;n<a;n++)e[n]=arguments[n];return r=j.call.apply(j,[this].concat(e)),r.renderContent=function(){var c=r.props,x=c.contentHeight,Z=c.title,N=c.avatar,L=c.action,J=c.total,R=c.footer,G=c.children,nt=c.loading;return nt?!1:(0,m.jsxs)("div",{className:p().chartCard,children:[(0,m.jsxs)("div",{className:U()(p().chartTop,(0,h.Z)({},p().chartTopMargin,!G&&!R)),children:[(0,m.jsx)("div",{className:p().avatar,children:N}),(0,m.jsxs)("div",{className:p().metaWrap,children:[(0,m.jsxs)("div",{className:p().meta,children:[(0,m.jsx)("span",{className:p().title,children:Z}),(0,m.jsx)("span",{className:p().action,children:L})]}),Q(J)]})]}),G&&(0,m.jsx)("div",{className:p().content,style:{height:x||"auto"},children:(0,m.jsx)("div",{className:x&&p().contentFixed,children:G})}),R&&(0,m.jsx)("div",{className:U()(p().footer,(0,h.Z)({},p().footerMargin,!G)),children:R})]})},r}return(0,u.Z)(D,[{key:"render",value:function(){var a=this.props,e=a.loading,n=e===void 0?!1:e,c=a.contentHeight,x=a.title,Z=a.avatar,N=a.action,L=a.total,J=a.footer,R=a.children,G=(0,f.Z)(a,["loading","contentHeight","title","avatar","action","total","footer","children"]);return(0,m.jsx)(V.Z,(0,P.Z)((0,P.Z)({loading:n,bodyStyle:{padding:"20px 24px 8px 24px"}},G),{},{children:this.renderContent()}))}}]),D}(y.Component),X=K,l=t(16829),k=t.n(l),b=function(j){var D=j.label,r=j.value,a=(0,f.Z)(j,["label","value"]);return(0,m.jsxs)("div",(0,P.Z)((0,P.Z)({className:k().field},a),{},{children:[(0,m.jsx)("span",{className:k().label,children:D}),(0,m.jsx)("span",{className:k().number,children:r})]}))},et=b,w=function(j){return"".concat(i()(j).format("0,0.00")," \u20AC")},at={yuan:w,ChartCard:X,Field:et}},95045:function(F,A,t){"use strict";t.r(A),t.d(A,{default:function(){return st}});var H=t(13062),i=t(71230),P=t(89032),S=t(15746),V=t(22385),f=t(69713),h=t(2824),s=t(67294),u=t(21010),g=t(21349),o=t(3182),y=t(94043),Y=t.n(y);function U(){return I.apply(this,arguments)}function I(){return I=(0,o.Z)(Y().mark(function E(){return Y().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,u.WY)("/api/fake_analysis_chart_data"));case 1:case"end":return T.stop()}},E)})),I.apply(this,arguments)}function p(E,M,T,v,O){return m.apply(this,arguments)}function m(){return m=(0,o.Z)(Y().mark(function E(M,T,v,O,$){return Y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,u.WY)("/api/getNumberOfNewClients?startTime=".concat(M,"&endTime=").concat(T,"&_startTime=").concat(v,"&_endTime=").concat(O,"&store=").concat($)));case 1:case"end":return d.stop()}},E)})),m.apply(this,arguments)}function Q(E,M,T,v,O){return K.apply(this,arguments)}function K(){return K=(0,o.Z)(Y().mark(function E(M,T,v,O,$){return Y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,u.WY)("/api/getMostSpentClientsData?startTime=".concat(M,"&endTime=").concat(T,"&_startTime=").concat(v,"&_endTime=").concat(O,"&store=").concat($)));case 1:case"end":return d.stop()}},E)})),K.apply(this,arguments)}function X(E,M,T,v,O){return l.apply(this,arguments)}function l(){return l=(0,o.Z)(Y().mark(function E(M,T,v,O,$){return Y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,u.WY)("/api/getRepeatedCustomerRate?startTime=".concat(M,"&endTime=").concat(T,"&_startTime=").concat(v,"&_endTime=").concat(O,"&store=").concat($)));case 1:case"end":return d.stop()}},E)})),l.apply(this,arguments)}var k=t(58024),b=t(39144),et=t(92077),w=t.n(et),at=t(7110),B=t(64996),j=t.n(B),D=t(4937),r=t(85893),a=function(M){var T=M.loading,v=M.mostSpentClientsData,O=M.time,$=s.useMemo(function(){var d=[];return v.length>0&&v.map(function(C){var W=(0,D.l)(parseFloat(C.spent),parseFloat(C._spent),1);d.push({x:C.name,y:parseFloat(C.spent),a:W.diff,b:W.percentage})}),{data:d}},[v]),z=$.data;return(0,r.jsx)(b.Z,{loading:T,className:j().salesCard,bordered:!1,title:"Most Money Spent Clients",style:{height:"100%"},children:(0,r.jsx)(i.Z,{gutter:16,children:(0,r.jsx)(S.Z,{span:24,children:(0,r.jsx)(at.Z,{radius:.8,angleField:"y",colorField:"x",data:z,label:{type:"outer",style:{fontSize:15},formatter:function(C,W){return"".concat(w()(W._origin.y).format("0,0.00"),"\u20AC")}},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(C,W){return W.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(W[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(W[0].data.y,"\u20AC")+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(O)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(W[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(W[0].data.b)+"</div>":""}}})})})})},e=a,n=function(M){var T=M.loading,v=M.data,O=M.time,$=s.useMemo(function(){if(Object.keys(v).length>0){var z=(0,D.l)(parseFloat(v.current.notRepeated),parseFloat(v.prev.notRepeated),0),d=(0,D.l)(parseFloat(v.current.repeated),parseFloat(v.prev.repeated),0);return[{x:"Not Repeated",y:v.current.notRepeated,a:z.diff,b:z.percentage},{x:"Repeated",y:v.current.repeated,a:d.diff,b:d.percentage}]}else return[]},[v]);return(0,r.jsx)(b.Z,{loading:T,className:j().salesCard,bordered:!1,title:"Repeated Customer Rate",style:{height:"100%"},children:(0,r.jsx)(i.Z,{gutter:16,children:(0,r.jsx)(S.Z,{span:24,children:(0,r.jsx)(at.Z,{radius:.8,angleField:"y",colorField:"x",data:$,label:{type:"outer",style:{fontSize:15},formatter:function(d,C){return"".concat(w()(C._origin.y).format("0,0"))}},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(d,C){return C.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(C[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(C[0].data.y)+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(O)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(C[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(C[0].data.b)+"</div>":""}}})})})})},c=n,x=t(84186),Z=t(93356),N=t(68628),L=t(85518),J=t(30381),R=t.n(J),G=L.tq?{marginTop:164}:{},nt=function(){var M=(0,u.tT)("@@initialState"),T=M.initialState,v=(0,u.QT)(U),O=v.loading,$=v.data,z=(0,s.useState)([]),d=(0,h.Z)(z,2),C=d[0],W=d[1],ut=(0,s.useState)([]),ct=(0,h.Z)(ut,2),mt=ct[0],vt=ct[1],ft=(0,s.useState)({}),dt=(0,h.Z)(ft,2),pt=dt[0],ht=dt[1],rt=(0,D.H)(T),ot=rt.startTime,it=rt.endTime,q=rt._startTime,_=rt._endTime,lt=rt.store;return s.useEffect(function(){p(ot,it,q,_,lt).then(function(tt){W(tt)}),Q(ot,it,q,_,lt).then(function(tt){vt(tt)}),X(ot,it,q,_,lt).then(function(tt){ht(tt)})},[T]),(0,r.jsx)(g.Z,{style:G,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{gutter:24,style:{marginBottom:24},children:(0,r.jsx)(S.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,r.jsx)(s.Suspense,{fallback:null,children:Object.keys(C).length>0?(0,r.jsx)(x.th,{bordered:!1,title:"Number of New Clients",action:(0,r.jsx)(f.Z,{title:(0,r.jsx)(Z.mj,{current:C.current.count,prev:C.prev.count,_startTime:q,_endTime:_}),children:(0,r.jsx)(N.Z,{})}),loading:O,total:function(){return(0,r.jsx)("div",{children:C.current.count})},footer:(0,r.jsx)(Z.eW,{current:C.current.count,prev:C.prev.count}),contentHeight:46}):(0,r.jsx)("div",{})})})}),(0,r.jsx)(i.Z,{gutter:24,style:{marginBottom:24},children:(0,r.jsx)(S.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,r.jsx)(s.Suspense,{fallback:null,children:(0,r.jsx)(c,{loading:O,data:pt,time:"".concat(R()(q).format("YYYY/MM/DD")," ~ ").concat(R()(_).format("YYYY/MM/DD"))})})})}),(0,r.jsx)(i.Z,{gutter:24,children:(0,r.jsx)(S.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,r.jsx)(s.Suspense,{fallback:null,children:(0,r.jsx)(e,{loading:O,mostSpentClientsData:mt,time:"".concat(R()(q).format("YYYY/MM/DD")," ~ ").concat(R()(_).format("YYYY/MM/DD"))})})})})]})})},st=nt}}]);
