(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[986],{65911:function(Z,P,t){"use strict";var y=t(67294),h=t(2792),j=t(27199),T=t(30731),M=t(4874),o=function(e,s){var c={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(c[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)s.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(c[a[r]]=e[a[r]]);return c},p=(0,y.forwardRef)(function(e,s){var c=e.style,a=c===void 0?{height:"inherit"}:c,r=e.className,D=e.loading,S=e.loadingTemplate,Y=e.errorTemplate,C=o(e,["style","className","loading","loadingTemplate","errorTemplate"]),E=(0,j.Z)(h.VT,C),_=E.chart,O=E.container;return(0,y.useImperativeHandle)(s,function(){return{getChart:function(){return _.current}}}),y.createElement(T.Z,{errorTemplate:Y},D&&y.createElement(M.Z,{loadingTemplate:S}),y.createElement("div",{className:r,style:a,ref:O}))});P.Z=p},7110:function(Z,P,t){"use strict";var y=t(67294),h=t(2792),j=t(27199),T=t(30731),M=t(4874),o=function(e,s){var c={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(c[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)s.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(c[a[r]]=e[a[r]]);return c},p=(0,y.forwardRef)(function(e,s){var c=e.style,a=c===void 0?{height:"inherit"}:c,r=e.className,D=e.loading,S=e.loadingTemplate,Y=e.errorTemplate,C=o(e,["style","className","loading","loadingTemplate","errorTemplate"]),E=(0,j.Z)(h.by,C),_=E.chart,O=E.container;return(0,y.useImperativeHandle)(s,function(){return{getChart:function(){return _.current}}}),y.createElement(T.Z,{errorTemplate:Y},D&&y.createElement(M.Z,{loadingTemplate:S}),y.createElement("div",{className:r,style:a,ref:O}))});P.Z=p},31018:function(Z){Z.exports={iconGroup:"iconGroup___OnbI4",anticon:"anticon___adiVs",rankingList:"rankingList___3dzjG",rankingItemNumber:"rankingItemNumber___1L4tK",active:"active___vXykw",rankingItemTitle:"rankingItemTitle___2UuWW",salesExtra:"salesExtra___1bY9d",currentDate:"currentDate___1DUfE",salesCard:"salesCard___3Umfl",salesBar:"salesBar___OAqSW",salesRank:"salesRank___do2qD",salesCardExtra:"salesCardExtra___3hDgA",salesTypeRadio:"salesTypeRadio___3JorN",offlineCard:"offlineCard___yE76A",trendText:"trendText___1D6P-",rankingTitle:"rankingTitle___3f4tG",salesExtraWrap:"salesExtraWrap___2Lbx8"}},4937:function(Z,P,t){"use strict";t.d(P,{H:function(){return j},l:function(){return T}});var y=t(30381),h=t.n(y),j=function(o){var p=o.store,e=h()(o.range[0]).format("YYYY-MM-DD HH:mm:ss"),s=h()(o.range[1]).format("YYYY-MM-DD HH:mm:ss");if(o.compare==="lastDuration"){var c=h()(s).diff(e,"days"),a=h()(e,"YYYY-MM-DD HH:mm:ss").subtract(c+1,"days").format("YYYY-MM-DD HH:mm:ss"),r=h()(a,"YYYY-MM-DD HH:mm:ss").add(c,"days").format("YYYY-MM-DD 23:59:59");return{store:p,startTime:e,endTime:s,_startTime:a,_endTime:r}}if(o.compare==="lastYear"){var D=h()(e,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),S=h()(s,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),Y=D.format("YYYY-MM-DD HH:mm:ss"),C=S.format("YYYY-MM-DD HH:mm:ss");return{store:p,startTime:e,endTime:s,_startTime:Y,_endTime:C}}},T=function(o,p,e){var s=e===0?"":"\u20AC";if(p>0){var c=e===0?o-p:(o-p).toFixed(2),a=c/p*100;return{diff:c>0?"+".concat(c).concat(s):"".concat(c).concat(s),percentage:a>0?"+".concat(a.toFixed(2),"%"):"".concat(a.toFixed(2),"%")}}else{var r=e===0?o:o.toFixed(2),D="\u221E";return{diff:r>0?"+".concat(r).concat(s):"".concat(r).concat(s),percentage:"no previous records"}}}},15463:function(Z,P,t){"use strict";t.r(P),t.d(P,{default:function(){return ct}});var y=t(13062),h=t(71230),j=t(89032),T=t(15746),M=t(2824),o=t(67294),p=t(21010),e=t(21349),s=t(3182),c=t(94043),a=t.n(c);function r(){return D.apply(this,arguments)}function D(){return D=(0,s.Z)(a().mark(function x(){return a().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.WY)("/api/fake_analysis_chart_data"));case 1:case"end":return i.stop()}},x)})),D.apply(this,arguments)}function S(x,u,i,v,m){return Y.apply(this,arguments)}function Y(){return Y=(0,s.Z)(a().mark(function x(u,i,v,m,f){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.WY)("/api/getMostFrequentSuppliers?startTime=".concat(u,"&endTime=").concat(i,"&_startTime=").concat(v,"&_endTime=").concat(m,"&store=").concat(f)));case 1:case"end":return n.stop()}},x)})),Y.apply(this,arguments)}function C(x,u,i,v,m){return E.apply(this,arguments)}function E(){return E=(0,s.Z)(a().mark(function x(u,i,v,m,f){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.WY)("/api/getMostPurchasedSuppliers?startTime=".concat(u,"&endTime=").concat(i,"&_startTime=").concat(v,"&_endTime=").concat(m,"&store=").concat(f)));case 1:case"end":return n.stop()}},x)})),E.apply(this,arguments)}function _(x,u,i,v,m){return O.apply(this,arguments)}function O(){return O=(0,s.Z)(a().mark(function x(u,i,v,m,f){return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.WY)("/api/getPurchaseData?startTime=".concat(u,"&endTime=").concat(i,"&_startTime=").concat(v,"&_endTime=").concat(m,"&store=").concat(f)));case 1:case"end":return n.stop()}},x)})),O.apply(this,arguments)}var ht=t(58024),R=t(39144),yt=t(13254),L=t(14277),V=t(92077),b=t.n(V),G=t(7110),J=t(31018),U=t.n(J),B=t(4937),l=t(85893),X=function(u){var i=u.loading,v=u.frequentSupplierData,m=u.time,f=[];return v.map(function(d){var n=(0,B.l)(parseFloat(d.quantity),parseFloat(d._quantity),0);f.push({x:d.name,y:parseFloat(d.quantity),a:n.diff,b:n.percentage})}),(0,l.jsx)(R.Z,{loading:i,className:U().salesCard,bordered:!1,title:"Most frequent suppliers(quantity)",style:{height:"100%"},children:f.length===0?(0,l.jsx)(L.Z,{}):(0,l.jsx)(G.Z,{radius:.8,angleField:"y",colorField:"x",data:f,label:{type:"outer",style:{fontSize:15},formatter:function(n,g){return"".concat(b()(g._origin.y).format("0,0"))}},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(n,g){return g.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.y)+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(m)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.b)+"</div>":""}}})})},k=X,w=function(u){var i=u.loading,v=u.purchasedSupplierData,m=u.time,f=[];return v.map(function(d){var n=(0,B.l)(parseFloat(d.total),parseFloat(d._total),1);f.push({x:d.name,y:parseFloat(d.total),a:n.diff,b:n.percentage})}),(0,l.jsx)(R.Z,{loading:i,className:U().salesCard,bordered:!1,title:"Most purchased suppliers(value)",style:{height:"100%"},children:f.length>0?(0,l.jsx)(G.Z,{radius:.8,angleField:"y",colorField:"x",data:f,label:{type:"outer",style:{fontSize:15},formatter:function(n,g){return"".concat(b()(g._origin.y).format("0,0.00"),"\u20AC")}},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(n,g){return g.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.y,"\u20AC")+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(m)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(g[0].data.b)+"</div>":""}}}):(0,l.jsx)(L.Z,{})})},q=w,tt=t(11849),xt=t(14965),et=t(94168),at=t(65911),Dt=et.Z.RangePicker,nt=function(u){var i=u.purchaseData,v=u.loading,m=o.useMemo(function(){var f=[];return i.length>0&&i.forEach(function(d){f.push({month:d.month,value:parseFloat(d.value),quantity:parseInt(d.quantity)})}),{data:[f,f],xField:"month",yField:["value","quantity"],geometryOptions:[{geometry:"column"},{geometry:"line",lineStyle:{lineWidth:2}}]}},[i]);return(0,l.jsx)(R.Z,{loading:v,className:U().salesCard,bordered:!1,title:"Quantity and value purchased",style:{height:"100%"},children:m.data[0].length>0?(0,l.jsx)(at.Z,(0,tt.Z)({},m)):(0,l.jsx)(L.Z,{})})},rt=nt,st=t(30381),W=t.n(st),lt=t(85518),it=lt.tq?{marginTop:164}:{},ot=function(){var u=(0,p.tT)("@@initialState"),i=u.initialState,v=(0,p.QT)(r),m=v.loading,f=v.data,d=(0,o.useState)([]),n=(0,M.Z)(d,2),g=n[0],ut=n[1],dt=(0,o.useState)([]),$=(0,M.Z)(dt,2),mt=$[0],pt=$[1],ft=(0,o.useState)([]),Q=(0,M.Z)(ft,2),vt=Q[0],gt=Q[1],F=(0,B.H)(i),N=F.startTime,z=F.endTime,A=F._startTime,H=F._endTime,K=F.store;return o.useEffect(function(){_(N,z,A,H,K).then(function(I){gt(I)}),S(N,z,A,H,K).then(function(I){ut(I)}),C(N,z,A,H,K).then(function(I){pt(I)})},[i]),(0,l.jsx)(e.Z,{style:it,children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{gutter:24,children:(0,l.jsx)(T.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,l.jsx)(o.Suspense,{fallback:null,children:(0,l.jsx)(rt,{purchaseData:vt,loading:m})})})}),(0,l.jsx)(h.Z,{gutter:24,style:{marginTop:24},children:(0,l.jsx)(T.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,l.jsx)(o.Suspense,{fallback:null,children:(0,l.jsx)(k,{loading:m,frequentSupplierData:g,time:"".concat(W()(A).format("YYYY/MM/DD")," ~ ").concat(W()(H).format("YYYY/MM/DD"))})})})}),(0,l.jsx)(h.Z,{gutter:24,style:{marginTop:24},children:(0,l.jsx)(T.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,l.jsx)(o.Suspense,{fallback:null,children:(0,l.jsx)(q,{loading:m,purchasedSupplierData:mt,time:"".concat(W()(A).format("YYYY/MM/DD")," ~ ").concat(W()(H).format("YYYY/MM/DD"))})})})})]})})},ct=ot}}]);
