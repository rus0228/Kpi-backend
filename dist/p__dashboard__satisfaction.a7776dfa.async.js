(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[854],{7110:function(E,f,t){"use strict";var u=t(67294),l=t(2792),C=t(27199),T=t(30731),H=t(4874),o=function(a,r){var n={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(n[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(a);s<e.length;s++)r.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(a,e[s])&&(n[e[s]]=a[e[s]]);return n},c=(0,u.forwardRef)(function(a,r){var n=a.style,e=n===void 0?{height:"inherit"}:n,s=a.className,v=a.loading,y=a.loadingTemplate,x=a.errorTemplate,g=o(a,["style","className","loading","loadingTemplate","errorTemplate"]),O=(0,C.Z)(l.by,g),Y=O.chart,j=O.container;return(0,u.useImperativeHandle)(r,function(){return{getChart:function(){return Y.current}}}),u.createElement(T.Z,{errorTemplate:x},v&&u.createElement(H.Z,{loadingTemplate:y}),u.createElement("div",{className:s,style:e,ref:j}))});f.Z=c},9033:function(E){E.exports={iconGroup:"iconGroup___3dqXz",anticon:"anticon___uFkQM",rankingList:"rankingList___2A8ot",rankingItemNumber:"rankingItemNumber___147xC",active:"active___2MWsD",rankingItemTitle:"rankingItemTitle___3ytG0",salesExtra:"salesExtra___cS5qG",currentDate:"currentDate___2qhzp",salesCard:"salesCard___3D_z3",salesBar:"salesBar___1btco",salesRank:"salesRank___22gu1",salesCardExtra:"salesCardExtra___1ExDt",salesTypeRadio:"salesTypeRadio___dd1tH",offlineCard:"offlineCard___3MPX8",trendText:"trendText___3UEKI",rankingTitle:"rankingTitle___3zg6Y",salesExtraWrap:"salesExtraWrap___2ULHn"}},4937:function(E,f,t){"use strict";t.d(f,{H:function(){return C},l:function(){return T}});var u=t(30381),l=t.n(u),C=function(o){var c=o.store,a=l()(o.range[0]).format("YYYY-MM-DD HH:mm:ss"),r=l()(o.range[1]).format("YYYY-MM-DD HH:mm:ss");if(o.compare==="lastDuration"){var n=l()(r).diff(a,"days"),e=l()(a,"YYYY-MM-DD HH:mm:ss").subtract(n+1,"days").format("YYYY-MM-DD HH:mm:ss"),s=l()(e,"YYYY-MM-DD HH:mm:ss").add(n,"days").format("YYYY-MM-DD 23:59:59");return{store:c,startTime:a,endTime:r,_startTime:e,_endTime:s}}if(o.compare==="lastYear"){var v=l()(a,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),y=l()(r,"YYYY-MM-DD HH:mm:ss").subtract(1,"year"),x=v.format("YYYY-MM-DD HH:mm:ss"),g=y.format("YYYY-MM-DD HH:mm:ss");return{store:c,startTime:a,endTime:r,_startTime:x,_endTime:g}}},T=function(o,c,a){var r=a===0?"":"\u20AC";if(c>0){var n=a===0?o-c:(o-c).toFixed(2),e=n/c*100;return{diff:n>0?"+".concat(n).concat(r):"".concat(n).concat(r),percentage:e>0?"+".concat(e.toFixed(2),"%"):"".concat(e.toFixed(2),"%")}}else{var s=a===0?o:o.toFixed(2),v="\u221E";return{diff:s>0?"+".concat(s).concat(r):"".concat(s).concat(r),percentage:"no previous records"}}}},24946:function(E,f,t){"use strict";t.r(f),t.d(f,{default:function(){return $}});var u=t(13062),l=t(71230),C=t(89032),T=t(15746),H=t(58024),o=t(39144),c=t(2824),a=t(21010),r=t(21349),n=t(67294),e=t(9033),s=t.n(e),v=t(7110),y=t(92077),x=t.n(y),g=t(3182),O=t(94043),Y=t.n(O);function j(){return R.apply(this,arguments)}function R(){return R=(0,g.Z)(Y().mark(function p(){return Y().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,a.WY)("/api/fake_analysis_chart_data"));case 1:case"end":return d.stop()}},p)})),R.apply(this,arguments)}function K(p,M,d,P,S){return A.apply(this,arguments)}function A(){return A=(0,g.Z)(Y().mark(function p(M,d,P,S,W){return Y().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,a.WY)("/api/getCustomerEvaluation?startTime=".concat(M,"&endTime=").concat(d,"&_startTime=").concat(P,"&_endTime=").concat(S,"&store=").concat(W)));case 1:case"end":return D.stop()}},p)})),A.apply(this,arguments)}var N=t(30381),z=t.n(N),F=t(4937),_=t(85518),m=t(85893),Q=_.tq?{marginTop:164}:{},X=function(){var M=(0,a.tT)("@@initialState"),d=M.initialState,P=(0,a.QT)(j),S=P.loading,W=(0,n.useState)([]),Z=(0,c.Z)(W,2),D=Z[0],J=Z[1],h=(0,F.H)(d),V=h.startTime,b=h.endTime,U=h._startTime,B=h._endTime,k=h.store,w="".concat(z()(U).format("YYYY/MM/DD")," ~ ").concat(z()(B).format("YYYY/MM/DD"));return n.useEffect(function(){K(V,b,U,B,k).then(function(L){var I=[];L.map(function(i){var G=(0,F.l)(parseFloat(i.current),parseFloat(i.prev),0);I.push({x:"".concat(i.rating," stars:"),y:i.current,a:G.diff,b:G.percentage})}),J([].concat(I))})},[d]),(0,m.jsx)(r.Z,{style:Q,children:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.Z,{gutter:24,children:(0,m.jsx)(T.Z,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,m.jsx)(n.Suspense,{fallback:null,children:(0,m.jsx)(o.Z,{loading:S,className:s().salesCard,bordered:!1,title:"Customer Satisfaction",style:{height:"100%"},children:(0,m.jsx)("div",{children:(0,m.jsx)(v.Z,{radius:.8,angleField:"y",colorField:"x",data:D,label:{type:"outer",style:{fontSize:15},formatter:function(I,i){return"".concat(x()(i._origin.y).format("0,0"))},content:"{percentage}"},interactions:[{type:"element-single-selected"},{type:"element-active"}],tooltip:{customContent:function(I,i){return i.length>0?'<div style="padding: 10px; font-size: 15px">'+"".concat(i[0].data.x)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(i[0].data.y)+'</div><div style="padding: 10px; font-size: 15px">'+"Compared: ".concat(w)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(i[0].data.a)+'</div><div style="padding: 10px; font-size: 15px">'+"".concat(i[0].data.b)+"</div>":""}}})})})})})})})})},$=X}}]);
